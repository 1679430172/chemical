<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>库存管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/web/component/layui/css/layui.css" media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>

<table lay-filter="test" class="layui-hide" id="test"></table>


<script src="/web/component/layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->

<script>
    layui.use(["form","table","layer","upload"], function(){
        var table = layui.table;
        var form = layui.form;
        var layer = layui.layer;
        var upload = layui.upload;

        table.render({
            elem: '#test'
            ,url:'/inventory/inventory.do'//数据接口
            ,page:true
            ,limit:20
            ,toolbar: '#toolbarDemo'
            ,defaultToolbar:["filter"]
            ,limits:[10,20,30]
            ,cols: [
                [
                {title: '序号', width: 80,width: 150, sort: true,  templet:"<div>{{ d.LAY_INDEX }}</div>"}
                ,{field:'number', title: '库存编号', width: '10%', sort: true , minWidth: 100}
                ,{field:'name', width:80, title: '品名', width: '10%', minWidth: 100}
                ,{field:'cas', width:80, title: 'cas号', sort: true , width: '10%', minWidth: 100}
                ,{field:'createTime', title: '创建时间', width: '10%', sort: true , minWidth: 100}
                ,{field:'updateTime', title: '更新时间', width: '10%', sort: true , minWidth: 100}
                ,{field:'amount', title: '库存数量',sort: true , width: '30%',  width: '10%', minWidth: 100} //minWidth：局部定义当前单元格的最小宽度
                ,{field:'remark', title: '备注', width: '10%', sort: true , minWidth: 100}
                ]
            ]
        });

        //监听表头
        table.on('toolbar(test)',function (obj) {

            console.log("66666666666");
            layer.msg("111111111111111111");
            var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
            if(layEvent == 'add'){
                layer.open({
                    type: 2,
                    //offset: 'auto',、
                    skin: 'layui-layer-rim',
                    area: ['314px', '450px'],
                    content: '/web/view/inventoryAdd.html', //这里content是一个URL，如果你不想让iframe出现滚动条，你还可以content: ['http://sentsin.com', 'no']
                    end:function () {
                        table.reload('demo', {
                            url: '/inventory/inventory.do'
                        });
                    }
                });
            }else if(layEvent === 'delete'){}
        });
    });


</script>
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" lay-event="add">添加</button>
        <button class="layui-btn layui-btn-sm" lay-event="delete">删除</button>
        <button type="button"   class="layui-btn layui-btn-sm" lay-event="text" id="text">
            <i class="layui-icon">&#xe601;</i>下载
        </button>
    </div>
</script>

</body>
</html>