<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>采购管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/web/component/layui/css/layui.css" media="all">
    <script src="/web/component/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/web/component/js/jquery-3.3.1.min.js" th:src="@{/web/component/js/jquery-3.3.1.min.js}"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>



<script>
    $(function () {
        var id=decodeURI(location.search);
        id=JSON.parse(id.split("=")[1]);
        $("#bt").val(id.bt)
        $("#nr").val(id.nr)
        $("#fjr").val(id.fjt)
        $("#remark").val(id.remark)
        $("#amount").val(id.amount)
    })

    //监听提交
    form.on('submit(formDemo)', function(data){
        $("#sub").attr("disabled",true);//按钮禁用
        console.log(data.elem) //被执行事件的元素DOM对象，一般为button对象
        console.log(data.form) //被执行提交的form对象，一般在存在form标签时才会返回
        console.log(data.field)//当前容器的全部表单字段，名值对形式：{name: value}
        //阻止表单跳转。如果需要表单跳转，去掉这段即可。
        $.post("/Gg/addGg.do",data.field,function (d) {
            if(d==="1"){
                layer.msg('添加成功！！！', {
                    icon: 1,
                    time: 1000 //2秒关闭（如果不配置，默认是3秒）
                }, function(){
                    $("#sub").removeAttr("disabled");//按钮启用
                    //假设这是iframe页
                    var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                    parent.layer.close(index); //再执行关闭
                });
            }
        });
        return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
    });
    //供应

    layui.use('layedit', function(){
        var layedit = layui.layedit,
            $ = layui.jquery;

        //构建一个默认的编辑器
        var index = layedit.build('LAY_demo1');

        //编辑器外部操作
        var active = {
            content: function(){
                alert(layedit.getContent(index)); //获取编辑器内容
            }
            ,text: function(){
                alert(layedit.getText(index)); //获取编辑器纯文本内容
            }
            ,selection: function(){
                alert(layedit.getSelection(index));
            }
        };

        $('.site-demo-layedit').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });

        //自定义工具栏
        layedit.build('LAY_demo2', {
            tool: ['face', 'link', 'unlink', '|', 'left', 'center', 'right']
            ,height: 100
        })
    });
</script>
<form class="layui-form" action="">

    <div class="layui-form-item">
        <label class="layui-form-label">标题</label>
        <div class="layui-input-block" style="width: 255px;">
            <input type="text" id="bt" lay-verify="required" lay-reqtext="名称不能为空"  name="bt" required   placeholder="请输入标题" autocomplete="off" class="layui-input">
        </div>
    </div>

    <textarea id="demo" name="demo" style="display: none;"></textarea>
    <script>
        layui.use('layedit', function(){
            var layedit = layui.layedit;
            layedit.build('demo'); //建立编辑器
        });
    </script>

    <div class="layui-form-item">
        <label class="layui-form-label">发布人</label>
        <div class="layui-input-inline" style="width: 255px;">
            <input type="text" id="fig" lay-verify="required" lay-reqtext="数量不能为空" name="fjt" required   placeholder="请输入发布人" autocomplete="off" class="layui-input">
        </div>
    </div>


    <div class="layui-form-item" style="text-align: center">
        <button class="layui-btn " lay-submit lay-filter="formDemo"   id="sub">立即发布</button>
        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
    </div>

</form>

</body>
</html>