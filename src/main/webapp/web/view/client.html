<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>客户列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/web/component/layui/css/layui.css" media="all">
    <script src="/web/component/layui/layui.js"></script>
    <script type="text/javascript" src="/web/component/js/jquery-3.3.1.min.js" th:src="@{/web/component/js/jquery-3.3.1.min.js}"></script>
    <script>
        layui.use(['table'], function(){
            var table = layui.table;
            table.render({
                elem: '#demo'
                ,toolbar: '#toolbarDemo'
                ,height: 'full-20'
                ,url: '/Client/' //数据接口
                ,cols: [
                    [ //表头
                        {field: 'cid', title: '编号', sort: true, width:90}
                        ,{field: 'name', title: '客户名称', sort: true, width:120}
                        ,{field: 'address', title: '地址', sort: true,  width:120}
                        ,{field: 'phone', title: '电话',  width:120}
                        ,{field: 'invoice', title: '发票资料',   width:120}
                        ,{field: 'invoiceAddress', title: '收发票地址',  width:120}
                        ,{field: 'remark', title: '备注', width:120}
                    ]
                ]});

            //监听表头
            table.on('toolbar(test)',function (obj) {
                var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
                if(layEvent === 'import'){
                    layer.open({
                        area: ['450px', '500px'],
                        type: 2,
                        title:'添加客户',
                        content: '/Order/toAdd' //这里content是一个普通的String
                        ,end:function () {
                            table.reload('demo', {
                                url: '/Client/'
                            });
                        }
                    });
                }
            });
        });
    </script>
    <script type="text/html" id="toolbarDemo">
        <button type="button" class="layui-btn layui-btn-normal" lay-event="import" id="test1">添加</button>
    </script>
</head>
<body>
    <table id="demo" lay-filter="test"></table>
</body>
</html>