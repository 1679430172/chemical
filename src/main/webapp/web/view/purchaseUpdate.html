<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>修改采购</title>
    <link rel="stylesheet" href="/web/component/layui/css/layui.css" media="all">
    <script src="/web/component/layui/layui.js"></script>
    <script type="text/javascript" src="/web/component/js/jquery-3.3.1.min.js"></script>
    <script>
        // $(function () {
        //     get();
        //
        // })
        layui.use(["form","layer"], function() {
            var form = layui.form;
            var id=location.search;
            id=id.split("=");

            $(function () {
                get();
            })

            var get=function(){
                $.get("/purchase/querybyCid.do?cid="+id[1],function (d) {
                    var e=eval(d);
                    console.log(e);
                    $("#gid").val(e[0].cid);
                    form.val("dd", { //formTest 即 class="layui-form" 所在元素属性 lay-filter="" 对应的值
                        "name":e[0].name
                        ,"cas": e[0].cas // "name": "value"
                        ,"amount": e[0].amount
                        ,"price":e[0].price
                        // ,"check[status]": true
                        // ,"userId":e[0].uid
                     //   ,"supplierName":e[0].supplierName
                       // ,"supplierPhone":e[0].supplierPhone
                    });
                })
            }
        })

        // layui.use(["form","layer"], function() {
        //     var form = layui.form;
        //     var id=location.search;
        //     id=id.split("=");
        //
        //     $(function () {
        //         get();
        //     })
        //
        //
        //
        //     $.get("/supplier/users.do",function (d,s) {
        //         var e=eval(d);
        //         //console.log(e[0].userName);
        //         for(var i=0;i<e.length;i++){
        //             var option=$("<option>").text(e[i].userName);
        //             option.attr("value",e[i].uid);
        //             $("#userId").append(option);
        //             form.render();
        //         }
        //     })
        //
        //     $.get("/supplier/supplierInquires.do",function (d,s) {
        //         var e=eval(d);
        //         for(var i=0;i<e.data.length;i++){
        //             var option=$("<option>").text(e.data[i].name);
        //             option.attr("value",e.data[i].name);
        //             option.attr("id",e.data[i].phone);
        //             $("#supplierName").append(option);
        //             form.render();
        //         }
        //
        //     })
        //
        //     form.on("select(aihao)",function (d) {
        //         var s=$("#supplierName option:selected").attr("id");
        //         $("#phone").val(s);
        //     })

            //监听提交

        layui.use(['layer','form'], function(){
            var form = layui.form;
            //监听提交
            form.on('submit(formDemo)', function(data){
                $.post("/purchase/updateCid.do",data.field,function (d,s) {
                    if(d===1){
                        layer.msg('修改成功！！！', {
                            icon: 1,
                            time: 1000 //2秒关闭（如果不配置，默认是3秒）
                        }, function(){
                            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                            parent.layer.close(index); //再执行关闭
                        });
                    }else {
                        layer.msg('修改失败！！！');
                    }
                });
                return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
            });

        });

    </script>
</head>
<body>
<form class="layui-form" action="" lay-filter="dd">
    <div class="layui-form-item">
        <label class="layui-form-label">名称</label>
        <div class="layui-input-block">
            <input type="text" name="name" lay-verify="did"autocomplete="off" placeholder="" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">cas号</label>
        <div class="layui-input-inline">
            <input type="text" name="cas" lay-verify="did" autocomplete="off" placeholder="" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">数量</label>
        <div class="layui-input-inline">
            <input type="text" name="amount" lay-verify="did"  autocomplete="off" placeholder="" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item layui-form-text">
        <div class="layui-inline">
            <label class="layui-form-label">单价</label>
            <div class="layui-form-label">
                <input type="text" name="price" lay-verify="did"  autocomplete="off" placeholder="" class="layui-input">
            </div>
        </div>
<!--        <div class="layui-inline">-->
<!--            <select name="priceStatus">-->
<!--                <option>请选择是否含税</option>-->
<!--                <option value="0">含税</option>-->
<!--                <option value="1">不含税</option>-->
<!--            </select>-->
<!--        </div>-->

    </div>
    <!--    <div class="layui-form-item">-->
    <!--        <label class="layui-form-label">总价</label>-->
    <!--        <div class="layui-input-inline">-->
    <!--            <input type="text" name="sumPrice" id="sum" lay-verify="did" autocomplete="off" placeholder="" class="layui-input">-->
    <!--        </div>-->
    <!--    </div>-->
    <!--    <div class="layui-form-item">-->
    <!--        <label class="layui-form-label">是否收货</label>-->
    <!--        <div class="layui-input-inline">-->
    <!--            <select name="priceStatus">-->
    <!--                <option value="0">含税</option>-->
    <!--                <option value="1">不含税</option>-->
    <!--            </select>-->
    <!--        </div>-->
    <!--    </div>-->
    <!--    <div class="layui-form-item">-->
    <!--        <label class="layui-form-label">业务员</label>-->
    <!--        <div class="layui-input-inline">-->
    <!--            <select id="userId" name="userName" lay-verify=""></select>-->
    <!--        </div>-->
    <!--    </div>-->
<!--    <div class="layui-form-item">-->
<!--        <label class="layui-form-label">供应商名称</label>-->
<!--        <div class="layui-input-inline">-->
<!--            <select id ="supplierName" name="supplierName"  lay-filter="aihao"  onabort="is()" >-->
<!--                <option>请选择</option>-->
<!--            </select>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="layui-form-item ">-->
<!--        <label class="layui-form-label">联系电话</label>-->
<!--        <div class="layui-input-inline">-->
<!--            <input type="text"id="phone" lay-verify="required" lay-reqtext="供应商电话不能为空" style="width: 200px" name="supplierPhone" required  adisabled="disabled" placeholder="" autocomplete="off" class="layui-input">-->
<!--        </div>-->
<!--    </div>-->

    <div class="layui-form-item">
        <div class="layui-input-inline">
            <button class="layui-btn" lay-submit lay-filter="formDemo">修改</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
</body>
</html>